---
title: ceph talk(1)
date: 2019-02-15 17:21:10
tags: ceph
---

# 以下是ceph的知识随笔
- 1.M版将增加pg的合并功能
- 2.osd之间传播osdmap只是增量传播
- 3.增加了两个工具用来部署osd，ceph-disk和ceph-volume
- 4.L版osd增加了标签，如HDD或者SSD
- 5.L版pool也增加了标签，如rbd或者rgw
- 6.一个请求如果32s没有解决就会成为慢请求
- 7.L版增加了Mgr，分离了一部分mon的能力
- 8.osd中monclient的作用用来封装跟mon交互的细节
- 9.ceph分public网和集群网，主要是因为public网是client操作的请求，优先级比较高，集群网是ceph内部的请求，流量比较大，分开之后可以快速响应client的请求
- 10.M版osd的线程池减少了，只留了两个，一个用来处理用户命令，一个用来处理其他
- 11.osd的down状态表示临时故障，out表示永久性故障
- 12.每个host上面的osd编号最好不要连续，因为心跳检测的时候有用
- 13.读是同步，写一般是异步
- 14.数据的可靠性引入了日志储存系统
- 15.数据的一致性引入事务
- 16.bluestore没有开启数据压缩，《rados设计与实现》92页
- 17.磁盘空间管理有位图和段式管理
- 18.bluestore采用位图性能不好，在L版之后切到了段式管理
- 19.L版之后snapdir废弃
- 20.副本时，读是同步操作，写是异步操作
